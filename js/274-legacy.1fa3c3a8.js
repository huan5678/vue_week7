"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[274],{9274:function(e,a,t){t.r(a),t.d(a,{default:function(){return N}});var r=t(6252),n=t(9963),s=t(3577),o={class:"flex justify-center items-center h-screen bg-gray-50"},l={class:"container max-w-lg"},i=(0,r._)("legend",{class:"text-3xl font-medium text-center text-primary-600 tracking-wide"},"管理者登入",-1),d={class:"space-y-4"},u=(0,r._)("label",{for:"name",class:"block font-normal"},"使用者帳號",-1),c={class:"space-y-4"},p=(0,r._)("label",{for:"password",class:"block font-normal"},"使用者密碼",-1),m=(0,r._)("button",{type:"submit",class:"py-4 w-full text-secondary-50 bg-secondary-400 rounded-lg hover:bg-secondary-600 transition duration-300"}," 登入 ",-1),f={class:"mb-2 text-center"};function g(e,a,t,g,v,w){var y=(0,r.up)("AlertModal");return(0,r.wg)(),(0,r.iD)("main",o,[(0,r._)("div",l,[(0,r._)("form",{class:"p-8 space-y-8 bg-white rounded shadow-sm",onSubmit:a[2]||(a[2]=(0,n.iM)((function(){return g.handlerSubmit&&g.handlerSubmit.apply(g,arguments)}),["prevent"]))},[i,(0,r._)("div",d,[u,(0,r.wy)((0,r._)("input",{id:"name",type:"text",name:"userName",placeholder:"請輸入帳號Email","onUpdate:modelValue":a[0]||(a[0]=function(e){return g.userName=e}),class:"p-2 w-full text-primary-800 border font-light focus:text-primary-600 bg-gray-50 rounded focus:border-primary-500 focus:ring-primary-500 invalid:border-primary-600 invalid:text-primary-600"},null,512),[[n.nr,g.userName,void 0,{trim:!0}]])]),(0,r._)("div",c,[p,(0,r.wy)((0,r._)("input",{id:"password",type:"password",class:"p-2 w-full text-primary-800 bg-gray-50 rounded border invalid:text-primary-600 invalid:border-primary-600 font-light focus:text-primary-600 focus:border-primary-500 focus:ring-primary-500","onUpdate:modelValue":a[1]||(a[1]=function(e){return g.userPassword=e}),placeholder:"請輸入密碼"},null,512),[[n.nr,g.userPassword]])]),m],32)]),(0,r.Wm)(y,{modelValue:g.openModal,"onUpdate:modelValue":a[3]||(a[3]=function(e){return g.openModal=e}),onCancel:g.cancel},{title:(0,r.w5)((function(){return[(0,r.Uk)((0,s.zw)(g.modalMessage.title),1)]})),default:(0,r.w5)((function(){return[(0,r._)("p",f,(0,s.zw)(g.modalMessage.message),1),(0,r._)("p",null,(0,s.zw)(g.modalMessage.detail),1)]})),_:1},8,["modelValue","onCancel"])])}var v=t(2262),w=t(2119),y=t(7565),b={class:"bg-secondary-700 p-4 text-secondary-100 block relative"},h=["onClick"],x=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707\n            8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0\n            1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),_=[x],k={class:"p-4"},M={class:"flex justify-center items-center p-4"},C=["onClick"];function S(e,a,t,n,s,o){var l=(0,r.up)("vue-final-modal");return(0,r.wg)(),(0,r.j4)(l,(0,r.dG)(e.$attrs,{classes:"flex justify-center items-center bg-opacity-50 backdrop-blur-[2px]","content-class":"bg-gray-50 rounded-md shadow-md overflow-hidden min-w-[350px]"}),{default:(0,r.w5)((function(a){var t=a.params,n=a.close;return[(0,r._)("span",b,[(0,r.WI)(e.$slots,"title"),(0,r._)("button",{class:"absolute top-0 right-0 p-2",onClick:n},_,8,h)]),(0,r._)("div",k,[(0,r.WI)(e.$slots,"default",{params:t})]),(0,r._)("div",M,[(0,r._)("button",{class:"py-2 px-4 bg-secondary-700 text-secondary-50 rounded w-1/3",onClick:function(a){return e.$emit("cancel",n)}},"確定",8,C)])]})),_:3},16)}var j={name:"AlertModal",inheritAttrs:!1,emits:["cancel"]},L=t(3744);const U=(0,L.Z)(j,[["render",S]]);var V=U,z={components:{AlertModal:V},setup:function(){var e="https://vue3-course-api.hexschool.io/v2/",a=(0,r.f3)("axios"),t=(0,y.Z)(),n=t.adminStore,s=n.handleSetLogin,o=n.handleCheckUser,l=n.handleGetToken,i=(0,w.tv)(),d=(0,v.iH)(""),u=(0,v.iH)(""),c=(0,v.qj)({title:"",message:"",detail:""}),p=(0,v.iH)(!1);function m(){var t=d.value,r=u.value;a.post("".concat(e,"admin/signin"),{username:t,password:r}).then((function(e){var a={token:e.data.token,expired:e.data.expired};s(a),c.message=e.data.message,c.title="登入成功",p.value=!0,setTimeout((function(){p.value=!1,i.push("/admin")}),3e3)})).catch((function(e){console.dir(e),c.message=e.response.data.message,c.detail=e.response.data.error.message,c.title="登入失敗",p.value=!0}))}var f=function(){p.value=!1};return(0,r.wF)((function(){l(),o()?i.push("/login"):i.push("/admin")})),{userName:d,userPassword:u,handlerSubmit:m,openModal:p,cancel:f,modalMessage:c}}};const A=(0,L.Z)(z,[["render",g]]);var N=A}}]);
//# sourceMappingURL=274-legacy.1fa3c3a8.js.map