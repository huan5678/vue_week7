{"version":3,"file":"js/274-legacy.1fa3c3a8.js","mappings":"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","sources":["webpack://vue-week7/./src/views/frontEnd/LoginView.vue","webpack://vue-week7/./src/components/AlertModal.vue","webpack://vue-week7/./src/components/AlertModal.vue?e43f","webpack://vue-week7/./src/views/frontEnd/LoginView.vue?4698"],"sourcesContent":["<script>\nimport {\n  ref, inject, reactive, onBeforeMount,\n} from 'vue';\nimport { useRouter } from 'vue-router';\nimport useStore from '@/stores';\nimport AlertModal from '@/components/AlertModal.vue';\n\nexport default {\n  components: {\n    AlertModal,\n  },\n  setup() {\n    const baseUrl = process.env.VUE_APP_API_URL;\n    const axios = inject('axios');\n    const { adminStore } = useStore();\n    const {\n      handleSetLogin, handleCheckUser, handleGetToken,\n    } = adminStore;\n    const router = useRouter();\n    const userName = ref('');\n    const userPassword = ref('');\n    const modalMessage = reactive({\n      title: '',\n      message: '',\n      detail: '',\n    });\n    const openModal = ref(false);\n\n    function handlerSubmit() {\n      const username = userName.value;\n      const password = userPassword.value;\n      axios.post(`${baseUrl}admin/signin`, { username, password })\n        .then((res) => {\n          const data = {\n            token: res.data.token,\n            expired: res.data.expired,\n          };\n          handleSetLogin(data);\n          modalMessage.message = res.data.message;\n          modalMessage.title = '登入成功';\n          openModal.value = true;\n          setTimeout(() => {\n            openModal.value = false;\n            router.push('/admin');\n          }, 3000);\n        })\n        .catch((err) => {\n          console.dir(err);\n          modalMessage.message = err.response.data.message;\n          modalMessage.detail = err.response.data.error.message;\n          modalMessage.title = '登入失敗';\n          openModal.value = true;\n        });\n    }\n\n    const cancel = function () {\n      openModal.value = false;\n    };\n\n    onBeforeMount(() => {\n      handleGetToken();\n      if (handleCheckUser()) {\n        router.push('/login');\n      } else {\n        router.push('/admin');\n      }\n    });\n\n    return {\n      userName,\n      userPassword,\n      handlerSubmit,\n      openModal,\n      cancel,\n      modalMessage,\n    };\n  },\n};\n</script>\n\n<template>\n  <main class=\"flex justify-center items-center h-screen bg-gray-50\">\n    <div class=\"container max-w-lg\">\n      <form class=\"p-8 space-y-8 bg-white rounded shadow-sm\" @submit.prevent=\"handlerSubmit\">\n        <legend class=\"text-3xl font-medium\n        text-center text-primary-600 tracking-wide\">管理者登入</legend>\n        <div class=\"space-y-4\">\n          <label for=\"name\" class=\"block font-normal\">使用者帳號</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"userName\"\n            placeholder=\"請輸入帳號Email\"\n            v-model.trim=\"userName\"\n            class=\"p-2 w-full text-primary-800 border font-light\n            focus:text-primary-600 bg-gray-50 rounded\n            focus:border-primary-500 focus:ring-primary-500\n            invalid:border-primary-600 invalid:text-primary-600\"\n          />\n        </div>\n        <div class=\"space-y-4\">\n          <label for=\"password\" class=\"block font-normal\">使用者密碼</label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            class=\"p-2 w-full text-primary-800 bg-gray-50 rounded border\n            invalid:text-primary-600 invalid:border-primary-600 font-light\n            focus:text-primary-600 focus:border-primary-500 focus:ring-primary-500\"\n            v-model=\"userPassword\"\n            placeholder=\"請輸入密碼\"\n          />\n        </div>\n        <button\n          type=\"submit\"\n          class=\"py-4 w-full text-secondary-50 bg-secondary-400 rounded-lg\n          hover:bg-secondary-600\n          transition duration-300\"\n        >\n          登入\n        </button>\n      </form>\n    </div>\n    <AlertModal v-model=\"openModal\" @cancel=\"cancel\">\n      <template v-slot:title>{{ modalMessage.title }}</template>\n      <p class=\"mb-2 text-center\">{{ modalMessage.message }}</p>\n      <p>{{ modalMessage.detail }}</p>\n    </AlertModal>\n  </main>\n</template>\n","<script>\nexport default {\n  name: 'AlertModal',\n  inheritAttrs: false,\n  emits: ['cancel'],\n};\n</script>\n\n<template>\n  <vue-final-modal\n  v-slot=\"{ params, close }\"\n  v-bind=\"$attrs\"\n  classes=\"flex justify-center items-center bg-opacity-50 backdrop-blur-[2px]\"\n  content-class=\"bg-gray-50 rounded-md shadow-md overflow-hidden min-w-[350px]\"\n  >\n    <span class=\"bg-secondary-700 p-4 text-secondary-100 block relative\">\n      <slot name=\"title\"></slot>\n      <button class=\"absolute top-0 right-0 p-2\" @click=\"close\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"currentColor\"\n          class=\"w-8 h-8\"\n          viewBox=\"0 0 16 16\"\n        >\n          <path\n            d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707\n            8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0\n            1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n          />\n        </svg>\n      </button>\n    </span>\n    <div class=\"p-4\">\n      <slot :params=\"params\"></slot>\n    </div>\n    <div class=\"flex justify-center items-center p-4\">\n      <button class=\"py-2 px-4 bg-secondary-700 text-secondary-50 rounded w-1/3\"\n      @click=\"$emit('cancel', close)\">確定</button>\n    </div>\n  </vue-final-modal>\n</template>\n","import { render } from \"./AlertModal.vue?vue&type=template&id=1a4d7e94\"\nimport script from \"./AlertModal.vue?vue&type=script&lang=js\"\nexport * from \"./AlertModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Volumes/DATA/Design_Craft/Web/Vue-hexschool/vue-week7/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LoginView.vue?vue&type=template&id=5af96c78\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Volumes/DATA/Design_Craft/Web/Vue-hexschool/vue-week7/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","type","_createElementBlock","onSubmit","$setup","_hoisted_3","_hoisted_5","id","name","placeholder","$event","_hoisted_7","_hoisted_8","_createVNode","_component_AlertModal","onCancel","title","_toDisplayString","message","detail","xmlns","fill","viewBox","d","_createBlock","_component_vue_final_modal","_ctx","classes","params","close","_renderSlot","onClick","inheritAttrs","emits","__exports__","components","AlertModal","setup","baseUrl","process","axios","inject","useStore","adminStore","handleSetLogin","handleCheckUser","handleGetToken","router","useRouter","userName","ref","userPassword","modalMessage","reactive","openModal","handlerSubmit","username","value","password","post","then","res","data","token","expired","setTimeout","push","catch","err","console","dir","response","error","cancel","onBeforeMount","render"],"sourceRoot":""}