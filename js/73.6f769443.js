"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[73],{7565:function(e,t,a){a.d(t,{Z:function(){return g}});var o=a(6252),r=a(2262),n=a(8262),s=a(9669),c=a.n(s);const l=(0,n.Q_)("admin",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a=(0,r.iH)(""),n=(0,r.iH)(""),s=(0,r.iH)(!1);function l(){c().defaults.headers.common.Authorization=a.value,e.post(`${t}api/user/check`).then((e=>(s.value=e.data.success,e.data.success))).catch((e=>(console.dir(e),s.value=e.response.data.success,e.response.data.success)))}function d(){const e=document.cookie.split("; backendToken="),t=e.shift().split(";");return t.forEach((e=>{e.trim().startsWith("backendToken=")&&(a.value=e.trim().split("=")["1"])})),e}function i(e){a.value=e.token,n.value=e.expired,s.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function u(){s.value=!1,a.value="",n.value="",e.post(`${t}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:n,isLoggedIn:s,handleSetLogin:i,handleSetLogout:u,handleCheckUser:l,handleGetToken:d,handleClearToken:p}}));const d=(0,n.Q_)("adminData",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,r.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1}),s=(0,r.qj)({selected:""});function c(e,t){s.selected=e,n.tempProduct=t}function d(e=!1){n.isOpenModal=e}const i=l();function u(){let o=n.selectedTarget;switch(o){case"product":o="products/all";break;case"order":o="orders";break;case"coupon":o="coupons";break;case"article":o="articles";break;default:o="products";break}e.get(`${t}api/${a}/admin/${n.selectedTarget}`,{token:i.token}).then((e=>{n.dataList=e.data[`${o}`]})).catch((e=>{console.dir(e)}))}function p(o=n.currentPage,r=n.category){let s=n.selectedTarget;switch(s){case"product":s="products";break;case"order":s="orders";break;case"coupon":s="coupons";break;case"article":s="articles";break;default:s="products";break}let c=r;null===r&&(c=""),e.get(`${t}api/${a}/admin/${s}/${"product"!==s?`?page=${o}`:""}${c}`,{token:i.token}).then((e=>{n.dataList=e.data[`${s}`],n.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function g(o,r){e.put(`${t}api/${a}/admin/${n.selectedTarget}/${o}`,r,{token:i.token}).then((()=>{p()})).catch((e=>{console.dir(e)}))}function h(o=null){let r=n.selectedTarget;switch(r){case"order":r="orders/all";break;case"coupon":r="coupon";break;default:r="products";break}e.delete(`${t}api/${a}/admin/${r}/${o}`,{token:i.token}).then((()=>{p()})).catch((e=>{console.dir(e)}))}function f(o){e.post(`${t}api/${a}/admin/${n.selectedTarget}`,o,{token:i.token}).then((()=>{p(n.currentPage)})).catch((e=>{console.dir(e)}))}function m(o){const r=new FormData;return r.append("file-to-upload",o),e.post(`${t}api/${a}/admin/upload`,r,{token:i.token})}return{adminData:n,functionSelected:s,handleControlModal:d,handleCreateData:f,handleGetDataAll:u,handleGetDataList:p,handleEditData:g,handleDeleteData:h,handleImageUpload:m,handleSelectFunction:c}}));const i=(0,n.Q_)("product",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,r.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),s=(0,r.iH)(""),c=(0,r.iH)([]);function l(){e.get(`${t}api/${a}/products/all`).then((e=>{n.products=e.data.products,e.data.products.forEach((e=>{c.value.includes(e.category)||c.value.push(e.category)}))})).catch((e=>{console.dir(e)}))}function d(o="",r=n.currentPage){let s=o;"all"===o&&(s=""),console.log(s),e.get(`${t}api/${a}/products?page=${r}&category=${s}`).then((e=>{n.products=e.data.products,n.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function i(o){s.value=o,e(`${t}api/${a}/product/${o}`).then((e=>{s.value="",n.productDetail=e.data.product})).catch((e=>{console.dir(e),s.value=""}))}return{productList:n,handleGetProductAll:l,handleGetProductList:d,productCategory:c,handleGetProductDetail:i,isLoading:s}}));const u=(0,n.Q_)("cart",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",n=(0,r.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),s=(0,r.iH)("");function c(){e.get(`${t}api/${a}/cart`).then((e=>{n.list=e.data.data.carts,n.totalPrice=e.data.data.total,n.finalPrice=e.data.data.final_total})).catch((e=>{console.dir(e)}))}function l(o,r=1){s.value=o,e.post(`${t}api/${a}/cart`,{data:{product_id:o,qty:r}}).then((e=>{n.data=e.data.data,n.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function d(o){s.value=o,e.delete(`${t}api/${a}/cart/${o}`).then((e=>{n.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function i(o,r){s.value=o,e.put(`${t}api/${a}/cart/${o}`,{data:{data:{product_id:o,qty:r}}}).then((e=>{n.message=e.data.message,s.value="",c()})).catch((e=>{console.dir(e),s.value=""}))}function u(){e.delete(`${t}api/${a}/carts`).then((e=>{n.message=e.data.message,c()})).catch((e=>{console.dir(e)}))}return{cartData:n,isLoading:s,handleAddCart:l,handleGetCart:c,handleDeleteCart:d,handleUpdateCart:i,handleClearCart:u}}));const p=(0,n.Q_)("order",(()=>{const e=(0,o.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:n}=u(),s=(0,r.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),c=(0,r.qj)({success:!1,orders:[],pagination:{},message:[]});function l(o){e.post(`${t}api/${a}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((e=>{s.success=e.data.success,s.message=e.data.message,s.total=e.data.total,s.create_at=e.data.create_at,s.orderId=e.data.orderId,n()})).catch((e=>{console.dir(e)}))}function d(){e.get(`${t}api/${a}/orders`).then((e=>{c.success=e.data.success,c.orders=e.data.orders,c.pagination=e.data.pagination,c.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:s,orderList:c,handleSendOrder:l,handleGetOrderList:d}}));function g(){const e=l(),t=d(),a=i(),o=p(),r=u();return{adminStore:e,adminDataStore:t,productStore:a,orderStore:o,cartStore:r}}},1614:function(e,t,a){a.d(t,{Z:function(){return i}});var o=a(6252);const r=["href"];function n(e,t,a,n,s,c){const l=(0,o.up)("router-link");return n.isExternalLink?((0,o.wg)(),(0,o.iD)("a",(0,o.dG)({key:0},e.$attrs,{rel:"noopener",href:e.to,target:"_blank"}),[(0,o.WI)(e.$slots,"default")],16,r)):((0,o.wg)(),(0,o.j4)(l,(0,o.dG)({key:1},e.$props,{class:["py-2 px-3 font-medium text-gray-500 border-b-2 border-transparent transition duration-300 ease-in-out",n.isActive?"border-primary-300 text-primary-400 disabled cursor-default":"text-gray-300 hover:border-primary-400 hover:text-primary-400 focus:border-primary-400"]}),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},16,["class"]))}var s=a(2119),c={props:{...s.rH.props},setup(e){const{route:t,href:a,isActive:r,isExactActive:n,navigate:c}=(0,s.nB)(e),l=(0,o.Fl)((()=>"string"===typeof e.to&&e.to.startsWith("http")));return{isExternalLink:l,href:a,navigate:c,isActive:r,route:t,isExactActive:n}}},l=a(3744);const d=(0,l.Z)(c,[["render",n]]);var i=d},4073:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var o=a(6252),r=a(3577),n=a(9963);const s={class:"flex overflow-hidden flex-col pb-4 space-y-4 bg-gray-50 rounded-md"},c=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147\n          2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1\n          0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"})],-1),l=(0,o.Uk)(" 回上一頁 "),d={class:"flex justify-between p-4"},i=["src","alt"],u={class:"flex-1 p-4 space-y-8"},p={class:"flex gap-4 items-center"},g={class:"mb-2 text-xl font-bold"},h={class:"py-1 px-2 ml-2 text-sm text-white bg-primary-400 rounded"},f={class:"flex gap-1 items-center"},m={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-warning-500",viewBox:"0 0 16 16"},v=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173\n                    6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927\n                    0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83\n                    4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),k=[v],w={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6 h-6 text-gray-400",viewBox:"0 0 16 16"},x=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389\n                    2.256c.386.198.824-.149.746-.592l-.83-4.73\n                    3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513\n                    0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523\n                    3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0\n                    0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8\n                    2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565\n                    0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),$=[x],b={class:"space-y-4"},y={class:"pl-1 text-gray-400 line-through"},_=(0,o.Uk)(" 個 / 元 "),L={class:"flex flex-col gap-4 justify-between"},D=(0,o._)("option",{value:"0",selected:"",disabled:""},"請選擇訂購數量",-1),C=["value"],z=["disabled"],A=["disabled"],P=(0,o._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),q=(0,o._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962\n                    7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),H=[P,q],T=(0,o.Uk)(" 加入購物車 "),U={class:"flex overflow-x-auto gap-4"},j=["src","alt"];function G(e,t,a,v,x,P){const q=(0,o.up)("AppLink");return(0,o.wg)(),(0,o.iD)("section",s,[(0,o.Wm)(q,{to:"/product",class:"text-secondary-700 flex items-center p-3 gap-3"},{default:(0,o.w5)((()=>[c,l])),_:1}),(0,o._)("div",d,[(0,o._)("img",{class:"max-h-[300px]",src:v.products.imageUrl,alt:v.products.title},null,8,i),(0,o._)("div",u,[(0,o._)("div",p,[(0,o._)("h2",g,[(0,o.Uk)((0,r.zw)(v.products.title)+" ",1),(0,o._)("span",h,(0,r.zw)(v.products.category),1)]),(0,o._)("ul",f,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,((e,t)=>(0,o._)("li",{key:e+new Date},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",m,k,512)),[[n.F8,v.products.rating>t]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",w,$,512)),[[n.F8,v.products.rating<=t]])]))),64))])]),(0,o._)("ul",b,[(0,o._)("li",null,"商品描述："+(0,r.zw)(v.products.description),1),(0,o._)("li",null,"商品內容："+(0,r.zw)(v.products.content),1),(0,o._)("li",null,[(0,o.Uk)((0,r.zw)(v.products.price)+" ",1),(0,o._)("span",y,(0,r.zw)(v.products.origin_price),1),_]),(0,o._)("li",L,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>v.qty=e),class:"w-1/2"},[D,((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(20,(e=>(0,o._)("option",{value:e,key:e+v.products.id},(0,r.zw)(e),9,C))),64))],512),[[n.bM,v.qty]]),(0,o._)("button",{class:(0,r.C_)(["flex justify-center items-center py-3 w-full rounded border border-danger-700 transition duration-300",0===v.qty?"bg-danger-700 text-gray-50 opacity-40 cursor-not-allowed":"bg-danger-500 text-gray-50 hover:bg-danger-700"]),onClick:t[1]||(t[1]=e=>v.handleUpdateCart(v.products.id,v.qty)),disabled:0===v.qty},[((0,o.wg)(),(0,o.iD)("svg",{class:(0,r.C_)(["mr-3 -ml-1 w-5 h-5 text-danger-50 animate-spin",v.isLoading===v.products.id?"":"hidden"]),disabled:v.isLoading===v.products.id,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H,10,A)),T],10,z)])])])]),(0,o._)("div",U,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.products.imagesUrl,(e=>((0,o.wg)(),(0,o.iD)("img",{key:e,class:"object-cover flex-auto w-1/12 max-h-48",src:e,alt:v.products.title},null,8,j)))),128))])])}var S=a(2262),I=a(2119),M=a(7565),E=a(1614),F={components:{AppLink:E.Z},setup(){const{productStore:e,cartStore:t}=(0,M.Z)(),{handleAddCart:a}=t,{productList:r,handleGetProductDetail:n}=e,s=(0,I.yj)(),c=(0,S.iH)(0);function l(e,t){a(e,t)}return(0,o.bv)((()=>{n(s.params.id)})),(0,o.m0)((()=>{void 0!==s.params.id&&n(s.params.id)})),{qty:c,products:(0,o.Fl)((()=>r.productDetail)),handleAddCart:a,isLoading:(0,o.Fl)((()=>t.isLoading)),handleUpdateCart:l}}},Z=a(3744);const B=(0,Z.Z)(F,[["render",G]]);var Q=B}}]);
//# sourceMappingURL=73.6f769443.js.map