"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[639],{7565:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(6252),o=a(2262),r=a(8262),c=a(9669),s=a.n(c);const d=(0,r.Q_)("admin",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a=(0,o.iH)(""),r=(0,o.iH)(""),c=(0,o.iH)(!1);function d(){s().defaults.headers.common.Authorization=a.value,e.post(`${t}api/user/check`).then((e=>(c.value=e.data.success,e.data.success))).catch((e=>(console.dir(e),c.value=e.response.data.success,e.response.data.success)))}function i(){const e=document.cookie.split("; backendToken="),t=e.shift().split(";");return t.forEach((e=>{e.trim().startsWith("backendToken=")&&(a.value=e.trim().split("=")["1"])})),e}function u(e){a.value=e.token,r.value=e.expired,c.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function l(){c.value=!1,a.value="",r.value="",e.post(`${t}api/user/logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:r,isLoggedIn:c,handleSetLogin:u,handleSetLogout:l,handleCheckUser:d,handleGetToken:i,handleClearToken:p}}));const i=(0,r.Q_)("adminData",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1}),c=(0,o.qj)({selected:""});function s(e,t){c.selected=e,r.tempProduct=t}function i(e=!1){r.isOpenModal=e}const u=d();function l(){let n=r.selectedTarget;switch(n){case"product":n="products/all";break;case"order":n="orders";break;case"coupon":n="coupons";break;case"article":n="articles";break;default:n="products";break}e.get(`${t}api/${a}/admin/${r.selectedTarget}`,{token:u.token}).then((e=>{r.dataList=e.data[`${n}`]})).catch((e=>{console.dir(e)}))}function p(n=r.currentPage,o=r.category){let c=r.selectedTarget;switch(c){case"product":c="products";break;case"order":c="orders";break;case"coupon":c="coupons";break;case"article":c="articles";break;default:c="products";break}let s=o;null===o&&(s=""),e.get(`${t}api/${a}/admin/${c}/${"product"!==c?`?page=${n}`:""}${s}`,{token:u.token}).then((e=>{r.dataList=e.data[`${c}`],r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function h(n,o){e.put(`${t}api/${a}/admin/${r.selectedTarget}/${n}`,o,{token:u.token}).then((()=>{p()})).catch((e=>{console.dir(e)}))}function g(n=null){let o=r.selectedTarget;switch(o){case"order":o="orders/all";break;case"coupon":o="coupon";break;default:o="products";break}e.delete(`${t}api/${a}/admin/${o}/${n}`,{token:u.token}).then((()=>{p()})).catch((e=>{console.dir(e)}))}function f(n){e.post(`${t}api/${a}/admin/${r.selectedTarget}`,n,{token:u.token}).then((()=>{p(r.currentPage)})).catch((e=>{console.dir(e)}))}function m(n){const o=new FormData;return o.append("file-to-upload",n),e.post(`${t}api/${a}/admin/upload`,o,{token:u.token})}return{adminData:r,functionSelected:c,handleControlModal:i,handleCreateData:f,handleGetDataAll:l,handleGetDataList:p,handleEditData:h,handleDeleteData:g,handleImageUpload:m,handleSelectFunction:s}}));const u=(0,r.Q_)("product",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({products:[],pagination:{},currentPage:1,productDetail:{}}),c=(0,o.iH)(""),s=(0,o.iH)([]);function d(){e.get(`${t}api/${a}/products/all`).then((e=>{r.products=e.data.products,e.data.products.forEach((e=>{s.value.includes(e.category)||s.value.push(e.category)}))})).catch((e=>{console.dir(e)}))}function i(n="",o=r.currentPage){let c=n;"all"===n&&(c=""),console.log(c),e.get(`${t}api/${a}/products?page=${o}&category=${c}`).then((e=>{r.products=e.data.products,r.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))}function u(n){c.value=n,e(`${t}api/${a}/product/${n}`).then((e=>{c.value="",r.productDetail=e.data.product})).catch((e=>{console.dir(e),c.value=""}))}return{productList:r,handleGetProductAll:d,handleGetProductList:i,productCategory:s,handleGetProductDetail:u,isLoading:c}}));const l=(0,r.Q_)("cart",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",r=(0,o.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0}),c=(0,o.iH)("");function s(){e.get(`${t}api/${a}/cart`).then((e=>{r.list=e.data.data.carts,r.totalPrice=e.data.data.total,r.finalPrice=e.data.data.final_total})).catch((e=>{console.dir(e)}))}function d(n,o=1){c.value=n,e.post(`${t}api/${a}/cart`,{data:{product_id:n,qty:o}}).then((e=>{r.data=e.data.data,r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function i(n){c.value=n,e.delete(`${t}api/${a}/cart/${n}`).then((e=>{r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function u(n,o){c.value=n,e.put(`${t}api/${a}/cart/${n}`,{data:{data:{product_id:n,qty:o}}}).then((e=>{r.message=e.data.message,c.value="",s()})).catch((e=>{console.dir(e),c.value=""}))}function l(){e.delete(`${t}api/${a}/carts`).then((e=>{r.message=e.data.message,s()})).catch((e=>{console.dir(e)}))}return{cartData:r,isLoading:c,handleAddCart:d,handleGetCart:s,handleDeleteCart:i,handleUpdateCart:u,handleClearCart:l}}));const p=(0,r.Q_)("order",(()=>{const e=(0,n.f3)("axios"),t="https://vue3-course-api.hexschool.io/v2/",a="club",{handleGetCart:r}=l(),c=(0,o.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),s=(0,o.qj)({success:!1,orders:[],pagination:{},message:[]});function d(n){e.post(`${t}api/${a}/order`,{data:{user:{name:n.name,email:n.email,tel:n.tel,address:n.address},message:n.message}}).then((e=>{c.success=e.data.success,c.message=e.data.message,c.total=e.data.total,c.create_at=e.data.create_at,c.orderId=e.data.orderId,r()})).catch((e=>{console.dir(e)}))}function i(){e.get(`${t}api/${a}/orders`).then((e=>{s.success=e.data.success,s.orders=e.data.orders,s.pagination=e.data.pagination,s.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:c,orderList:s,handleSendOrder:d,handleGetOrderList:i}}));function h(){const e=d(),t=i(),a=u(),n=p(),o=l();return{adminStore:e,adminDataStore:t,productStore:a,orderStore:n,cartStore:o}}},1614:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(6252);const o=["href"];function r(e,t,a,r,c,s){const d=(0,n.up)("router-link");return r.isExternalLink?((0,n.wg)(),(0,n.iD)("a",(0,n.dG)({key:0},e.$attrs,{rel:"noopener",href:e.to,target:"_blank"}),[(0,n.WI)(e.$slots,"default")],16,o)):((0,n.wg)(),(0,n.j4)(d,(0,n.dG)({key:1},e.$props,{class:["py-2 px-3 font-medium text-gray-500 border-b-2 border-transparent transition duration-300 ease-in-out",r.isActive?"border-primary-300 text-primary-400 disabled cursor-default":"text-gray-300 hover:border-primary-400 hover:text-primary-400 focus:border-primary-400"]}),{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"default")])),_:3},16,["class"]))}var c=a(2119),s={props:{...c.rH.props},setup(e){const{route:t,href:a,isActive:o,isExactActive:r,navigate:s}=(0,c.nB)(e),d=(0,n.Fl)((()=>"string"===typeof e.to&&e.to.startsWith("http")));return{isExternalLink:d,href:a,navigate:s,isActive:o,route:t,isExactActive:r}}},d=a(3744);const i=(0,d.Z)(s,[["render",r]]);var u=i},3842:function(e,t,a){a.d(t,{Z:function(){return $}});var n=a(6252);const o={class:"bg-secondary-900"},r={class:"container flex justify-between p-3"},c=(0,n.Uk)(" LOGO "),s={key:0,class:"flex gap-4 justify-between items-center"},d=(0,n.Uk)(" 產品列表 "),i=(0,n.Uk)(" 後台管理 "),u={key:1,class:"flex justify-center items-center gap-4"},l=(0,n._)("h2",{class:"text-lg text-secondary-50"},"管理者登出",-1);function p(e,t,a,p,h,g){const f=(0,n.up)("AppLink");return(0,n.wg)(),(0,n.iD)("section",o,[(0,n._)("nav",r,[(0,n._)("h2",null,[(0,n.Wm)(f,{to:"/"},{default:(0,n.w5)((()=>[c])),_:1})]),"product-detail"!==p.route.name?((0,n.wg)(),(0,n.iD)("ul",s,[(0,n._)("li",null,[(0,n.Wm)(f,{to:"product"},{default:(0,n.w5)((()=>[d])),_:1})]),(0,n._)("li",null,[(0,n.Wm)(f,{to:"admin"},{default:(0,n.w5)((()=>[i])),_:1})])])):(0,n.kq)("",!0),"dashboard"===p.route.name?((0,n.wg)(),(0,n.iD)("div",u,[l,(0,n._)("button",{class:"py-1 px-6 text-white bg-primary-500 hover:shadow-primary-600 rounded hover:shadow-inner transition duration-300",onClick:t[0]||(t[0]=e=>p.handleIsLogout())}," 登出 ")])):(0,n.kq)("",!0)])])}var h=a(2119),g=a(7565),f=a(1614),m={components:{AppLink:f.Z},setup(){const e=(0,h.yj)(),{adminStore:t}=(0,g.Z)(),{handleSetLogout:a,handleClearToken:n}=t,o=(0,h.tv)();function r(){n(),a(),o.push("/")}return{route:e,handleIsLogout:r}}},k=a(3744);const v=(0,k.Z)(m,[["render",p]]);var $=v},7639:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var n=a(6252),o=a(9963);function r(e,t,a,r,c,s){const d=(0,n.up)("TheHeader"),i=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d),(0,n.Wm)(i,null,{default:(0,n.w5)((({Component:e})=>[(0,n.Wm)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:2},1024)])),_:1})],64)}var c=a(3842),s={name:"FrontEndView",components:{TheHeader:c.Z}},d=a(3744);const i=(0,d.Z)(s,[["render",r]]);var u=i}}]);
//# sourceMappingURL=639.7b9079c9.js.map